



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for repositories that I have made">
      
      
        <link rel="canonical" href="https://docs.jwk.nz/dotnet_core/SQLSVR_WEBAPI/dotnet-2.1.x/01-project-setup/">
      
      
        <meta name="author" content="Jeffrey Kranenburg">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.2">
    
    
      
        <title>Introduction - docs.jwk.nz</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.3020aac5.css">
      
        <link rel="stylesheet" href="../../../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../../../../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#introduction" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.jwk.nz/" title="docs.jwk.nz" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              docs.jwk.nz
            </span>
            <span class="md-header-nav__topic">
              Introduction
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/jwknz/docs.jwk.nz/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    jwknz/docs.jwk.nz
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.jwk.nz/" title="docs.jwk.nz" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    docs.jwk.nz
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/jwknz/docs.jwk.nz/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    jwknz/docs.jwk.nz
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Dotnet Core
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Dotnet Core
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      WEB API with MSSQL
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        WEB API with MSSQL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="/dotnet_core/SQLSVR_WEBAPI/" title="WEB API with MSSQL" class="md-nav__link">
      WEB API with MSSQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="/dotnet_core/SQLSVR_WEBAPI/dotnet-2.1.x/01-project-setup/" title="Part 1 - Setup" class="md-nav__link">
      Part 1 - Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="/dotnet_core/SQLSVR_WEBAPI/dotnet-2.1.x/02-create-api/" title="Part 2 - The API" class="md-nav__link">
      Part 2 - The API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="/dotnet_core/SQLSVR_WEBAPI/dotnet-2.1.x/03-exercises/" title="Part 3 - Exercise" class="md-nav__link">
      Part 3 - Exercise
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      PHP
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        PHP
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      PHP Basics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        PHP Basics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="/php/php_basics/" title="PHP Basics" class="md-nav__link">
      PHP Basics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      MVC Framework
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        MVC Framework
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="/php/mvc_framework/" title="MVC Framework" class="md-nav__link">
      MVC Framework
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="/php/container_setup/install/" title="Part 1 - Setup Docker Container" class="md-nav__link">
      Part 1 - Setup Docker Container
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="/php/mvc_framework/setup/" title="Part 2 - Setup MVC Framework" class="md-nav__link">
      Part 2 - Setup MVC Framework
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="/php/mvc_framework/how-it-works/" title="Part 3 - Folder Structure" class="md-nav__link">
      Part 3 - Folder Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="/php/mvc_framework/mvc/" title="Part 4 - How MVC Works" class="md-nav__link">
      Part 4 - How MVC Works
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="/php/mvc_framework/exercise-1/" title="EX 1 - Create MVC part 1" class="md-nav__link">
      EX 1 - Create MVC part 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="/php/mvc_framework/exercise-2/" title="EX 2 - Create MVC part 2" class="md-nav__link">
      EX 2 - Create MVC part 2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/jwknz/docs.jwk.nz/edit/master/docs/dotnet_core/SQLSVR_WEBAPI/dotnet-2.1.x/01-project-setup.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h1>
<p>In this project, we are going to look at how to build a webapi that connects to a MSSQL database.</p>
<p>The idea (and use case) for this api is to be able to connect any (1 or more) application(s) to a database on a remote or local server without having to store any sensitive information within the application itself.</p>
<p>The credentails for the databse will be loaded using environment variables and the system is setup using docker containers, so it is easily deployable.</p>
<p>So let's get started!</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>For this tutorial I assume you have the following installed:</p>
<ul>
<li>VSCODE</li>
<li>Docker (docker-toolbox or docker for your operating system)<ul>
<li>You will need to adjust your docker setup or Virtual Box docker VM to support 2GB of RAM to support the MSSQL Server</li>
</ul>
</li>
<li>Git (which will give you git bash on Windows)</li>
</ul>
</div>
<h1 id="create_a_new_project">Create a new project<a class="headerlink" href="#create_a_new_project" title="Permanent link">&para;</a></h1>
<p>Not all of these steps are required, but they are useful and they will help you build a good API (and coding habits) - so treat them as if they are all required.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>When it says "Type in" it means type in the terminal  </li>
<li>The <code>&lt;projectname&gt;</code> is a placeholder - type in your own name, but do not type in the angle brackets</li>
</ul>
</div>
<p>Type in <code>git init &lt;projectname&gt;</code> to create a working directory with a git repository</p>
<p>Go into the folder by typing in <code>cd &lt;projectname&gt;</code></p>
<p>Type in <code>dotnet --list-sdks</code> to check what versions of dotnet core you have installed on your machine. This is required to see if you need to install the version that this tutorial requires. You should see something like this:</p>
<div class="admonition info">
<p class="admonition-title">Output of dotnet --list-sdks</p>
<div class="codehilite"><pre><span></span>$ dotnet --list-sdks
2.1.505 [/usr/local/share/dotnet/sdk]
2.2.104 [/usr/local/share/dotnet/sdk]
3.0.100-preview-010184 [/usr/local/share/dotnet/sdk]
3.0.100-preview3-010431 [/usr/local/share/dotnet/sdk]
</pre></div>

</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can find all of the dotnet core sdks <a href="https://dotnet.microsoft.com/download/dotnet-core">here</a>
But for this tutorial we are working with <a href="https://dotnet.microsoft.com/download/dotnet-core/2.1">this</a> version.</p>
</div>
<p>For this tutorial we are going to focus on version <strong>2.1.x</strong></p>
<p>Next type in <code>dotnet new global</code> to create a <strong>global.json</strong> file that you can use to specify what version of dotnet core you will use for the project.</p>
<ul>
<li>You will need to open this file in a code editor and change the version number to the version you have on your machine - I have 2.1.5</li>
</ul>
<div class="admonition info">
<p class="admonition-title">global.json</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;sdk&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2.1.505&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</div>
<p>Save and close the file.</p>
<p>Now you need to create your project, if you create it before the <strong>global.json</strong> change, you will create a project with the newest version and some of the instructions below may not work.</p>
<p>To create your project type in <code>dotnet new webapi</code> to create a new webapi project</p>
<p>Next you will need to create a <strong>.gitignore</strong> file since we don't want to push all our binary and non essential files into our repository.</p>
<p>Open the  the <a href="https://raw.githubusercontent.com/dotnet/core/master/.gitignore"><strong>.gitignore</strong></a> file from the official dotnet core repository and paste it into your <strong>.gitignore</strong> file.</p>
<p>Back in the terminal start your project by typing in <code>dotnet run</code> and view your site by going to <a href="http://localhost:5000/api/values">http://localhost:5000/api/values</a></p>
<p>If you see the a json string with:</p>
<div class="admonition info">
<p class="admonition-title">Output of default api</p>
<div class="codehilite"><pre><span></span><span class="p">[</span>
  <span class="s2">&quot;value1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value2&quot;</span>
<span class="p">]</span>
</pre></div>

</div>
<p>Then you have a working api project and we can start making the changes we need to connect it to a database.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<ul>
<li>Do an initial commit to your repository type in:<br />
<code>git add .</code> followed by<br />
<code>git commit -m "Initial Commit"</code></li>
</ul>
<p>Making regular commits allows you to revert back to previous version of your code if you make an error.</p>
</div>
<h1 id="setting_up_the_database">Setting up the database<a class="headerlink" href="#setting_up_the_database" title="Permanent link">&para;</a></h1>
<p>At the moment we have installed the dotnet sdk on our machine and this is the easiest since we can just run the <code>dotnet</code> commands from our terminal.</p>
<p>However to run a MSSQL Server you will either need to go through a tedious installation process, if you are on a Windows machine or else you are out of luck.</p>
<p>That is until Microsoft embraced the world of containers and allows us to install it as part of a docker container.</p>
<p>So in your terminal (or docker-toolbox for windows git bash terminal) type the following in to download the 2017 version of MSSQL Server</p>
<div class="codehilite"><pre><span></span>docker pull mcr.microsoft.com/mssql/server:2017-latest-ubuntu 
</pre></div>

<p>After the download is complete type in:</p>
<div class="codehilite"><pre><span></span>docker run -e &#39;ACCEPT_EULA=Y&#39; -e &#39;SA_PASSWORD=yourStrong(*)Password&#39; -e &#39;MSSQL_PID=Express&#39; -p 1433:1433 -d mcr.microsoft.com/mssql/server:2017-latest-ubuntu 
</pre></div>

<p>The password is set to <code>yourStrong(*)Password</code> which is the default password with the ! changed into an * - needless to say, you should probably change this, but it would be bad if I document my passwords here :-)</p>
<p>Once that you have run that command, you mssql server is up and running, so let's leave that sitting there for the moment.</p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>If all of the stuff above went well, you now have your development environment setup. We will talk about setting up the production side of things later, but let's write some code ...</p>
</div>
<p><img alt="Let's Code" src="https://memegenerator.net/img/instances/42970028/enough-talk-lets-code.jpg" /></p>
<h1 id="populating_our_database_with_some_data">Populating our Database with some data<a class="headerlink" href="#populating_our_database_with_some_data" title="Permanent link">&para;</a></h1>
<p>We now need to open our project in our code editor, so type in:</p>
<div class="codehilite"><pre><span></span><span class="c1"># if you are already in your project folder</span>
code .

<span class="c1"># if you are in its parent folder</span>
code &lt;projectname&gt;
</pre></div>

<p>This will open the project in Visual Studio Code.</p>
<p>Create a folder called <strong>sql</strong> and add 2 files to that folder, call the files <strong>tables.sql</strong> and <strong>data.sql</strong> respectively.</p>
<p>You can view a set of SQL files in the code repository the table structure can be found <a href="https://github.com/to-jk11/SQLSVR-WEBAPI/blob/master/sql/tables-nofk.sql">here</a> and the data for part of the database can be found <a href="https://github.com/to-jk11/SQLSVR-WEBAPI/blob/master/sql/data.sql">here</a></p>
<p>Copy the contents of the files into your project files.</p>
<p>Next we need to install an extension so we can execute code, since vscode detected that you are creating sql files, it may have already prompted you to install it. Since we are working with MSSQL it will be the right extension. (Do not install this extension if you are working with MySQL)</p>
<p>In any case, if you missed the prompt or it didn't happen, you can type this in the terminal to install it.</p>
<div class="codehilite"><pre><span></span>code --install-extension ms-mssql.mssql
</pre></div>

<p>After the install is complete, you will need to connect vscode to your data base, which you can do like this:</p>
<video src="https://d2ddoduugvun08.cloudfront.net/items/2Y0H1e0Z0w1h2z3p2U1l/vscode-setup-mssql-database-connection.mov" controls style="display: block;height: auto;width: 100%;">vscode-setup-mssql-database-connection.mov</video>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using docker toolbox, then your docker containers are inside of a Virtualbox VM.  </p>
<p>Instead of typing in localhost, you will need to type in the VM's ip address, which is: <code>192.168.99.100</code></p>
</div>
<p><br></p>
<p>Once you have the connection setup, go to the sql files and right click and select <code>Execute Query</code></p>
<p>Do this for the <strong>tables.sql</strong> first and then the <strong>data.sql</strong></p>
<p>You should see the results of the queries pop up in the side pane on the right, which you can close afterwards.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The above steps assume your database is still running in the docker container. So if you have any errors, check that first by typing in <code>docker ps -a</code> into the terminal</p>
</div>
<h1 id="setup_ef_core_entity_framework">SETUP EF Core (Entity Framework)<a class="headerlink" href="#setup_ef_core_entity_framework" title="Permanent link">&para;</a></h1>
<p>Entity Framework is part of the dotnet family and allows for super easy integration of a database to an application, may it be web based or otherwise.</p>
<p>There are 2 approaches you can take:<br />
1) Code First or<br />
2) Data First. </p>
<p>Since we already have a database, let's look at the <strong>Data First</strong> option.</p>
<p>Copy the <code>ItemGroup</code> tag below and paste it in the <strong>.csproj</strong> file of your project.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These packages are aligned to work with dotnet core 2.1.x, so these will need to be updated if you are using a newer version.</p>
<div class="codehilite"><pre><span></span>&lt;ItemGroup&gt;
  &lt;PackageReference Include=&quot;Microsoft.AspNetCore.App&quot; /&gt;
  &lt;PackageReference Include=&quot;Microsoft.AspNetCore.Razor.Design&quot; Version=&quot;2.1.2&quot; PrivateAssets=&quot;All&quot; /&gt;
  &lt;PackageReference Include=&quot;Microsoft.EntityFrameworkCore&quot; Version=&quot;2.1.1&quot; /&gt;
  &lt;PackageReference Include=&quot;Microsoft.EntityFrameworkCore.SqlServer&quot; Version=&quot;2.1.1&quot; /&gt;
  &lt;PackageReference Include=&quot;Microsoft.EntityFrameworkCore.SqlServer.Design&quot; Version=&quot;1.1.6&quot; /&gt;
  &lt;PackageReference Include=&quot;Microsoft.EntityFrameworkCore.Tools&quot; Version=&quot;2.1.1&quot;&gt;
    &lt;IncludeAssets&gt;runtime; build; native; contentfiles; analyzers&lt;/IncludeAssets&gt;
    &lt;PrivateAssets&gt;all&lt;/PrivateAssets&gt;
  &lt;/PackageReference&gt;
&lt;/ItemGroup&gt;
</pre></div>

</div>
<p>Type in <code>dotnet restore</code> to install the nuget packages.</p>
<p>Create a folder called <strong>Models</strong> and then run this command to have it create all the models for you.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need to change the credentials to suit your setup.
The DB Context is related to the sql files above, this would obviously be different if you are working on your own project.</p>
<div class="codehilite"><pre><span></span>dotnet ef dbcontext scaffold &quot;
Server=localhost;
Database=Rugby7db;
User=sa;
Password=yourStrong(*)Password;&quot; Microsoft.EntityFrameworkCore.SqlServer -o Models -f -c Rugby7Context 
</pre></div>

</div>
<p>In your <strong>startup.cs</strong> file, add this as your connection string </p>
<div class="codehilite"><pre><span></span>Server=localhost;Database=Rugby7db;User=sa;Password=yourStrong(*)Password;
</pre></div>

<p>In the <code>ConfigureServices</code> under the <code>services.AddMvc().SetCompatibilityVersion(CompatibilityVersion.Version_2_1);</code> line paste this:</p>
<div class="codehilite"><pre><span></span>// Connect to DB
string connection = &quot;Server=localhost;Database=Rugby7db;User=sa;Password=yourStrong(*)Password;&quot;;

services.AddDbContext&lt;Rugby7Context&gt;(options =&gt; options
        .UseSqlServer(connection)
);
</pre></div>

<div class="admonition success">
<p class="admonition-title">Success</p>
<p>So now that the database and models are setup, we are able to get to coding the API.</p>
</div>
<p>We will look at setting up the api controllers in the <a href="/dotnet_core/SQLSVR_WEBAPI/dotnet-2.1.x/02-create-api">next section</a></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 and maintained by <a href="https://twitter.com/jwknz">Jeff Kranenburg</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/jwknz" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://github.com/to-jk11" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://www.linkedin.com/in/jwknz" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://twitter.com/jwknz" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.267712eb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../../.."}})</script>
      
    
  </body>
</html>